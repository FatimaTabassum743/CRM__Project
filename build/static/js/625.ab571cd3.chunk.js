"use strict";(self.webpackChunkrasilabs=self.webpackChunkrasilabs||[]).push([[625],{77625:(e,a,i)=>{i.r(a),i.d(a,{default:()=>F});var s=i(65043),t=i(46041),n=i(56421),r=i(38003),l=i(85336),o=i(54154),d=i(41054),c=i(43714),u=i(6326),m=i(94323),g=i(82795),b=i(82103),x=i(18906);const h={root:"awsui_root_fvjdu_ki6j9_97",button:"awsui_button_fvjdu_ki6j9_140",dots:"awsui_dots_fvjdu_ki6j9_141","button-disabled":"awsui_button-disabled_fvjdu_ki6j9_169",arrow:"awsui_arrow_fvjdu_ki6j9_174","page-number":"awsui_page-number_fvjdu_ki6j9_184","button-current":"awsui_button-current_fvjdu_ki6j9_190","page-item":"awsui_page-item_fvjdu_ki6j9_207","root-disabled":"awsui_root-disabled_fvjdu_ki6j9_225"};var v=i(45595);const p={nextPageLabel:"",paginationLabel:"",previousPageLabel:"",pageLabel:e=>"".concat(e)};function j(e){let{className:a,ariaLabel:i,disabled:t,pageIndex:n,isCurrent:r=!1,children:l,onClick:o}=e;return s.createElement("li",{className:h["page-item"]},s.createElement("button",{className:(0,m.A)(a,h.button,t&&h["button-disabled"],r&&h["button-current"]),type:"button","aria-label":i,disabled:t,onClick:function(e){e.preventDefault(),o(n)},"aria-current":r},l))}function f(e){var{pageIndex:a}=e,i=(0,u.Tt)(e,["pageIndex"]);return s.createElement(j,Object.assign({className:h["page-number"],pageIndex:a},i),a)}function C(e){var a,i,t,{openEnd:n,currentPageIndex:r,ariaLabels:l,pagesCount:o,disabled:d,onChange:c,onNextPageClick:C,onPreviousPageClick:N,__internalRootRef:A=null}=e,_=(0,u.Tt)(e,["openEnd","currentPageIndex","ariaLabels","pagesCount","disabled","onChange","onNextPageClick","onPreviousPageClick","__internalRootRef"]);const L=(0,x.C)(_),{leftDots:k,leftIndex:w,rightIndex:P,rightDots:I}=function(e,a,i){const s=Math.floor(3.5);let t=s,n=a-1;i&&(t++,n=a+1);let r=e-s,l=e+t;r<2&&(l+=2-r,r=2),l>n&&(r-=l-n,l=n),r=Math.max(r,2),l=Math.min(l,n);const o=r>2,d=i||l<n;return o&&r++,d&&l--,{leftDots:o,rightDots:d,leftIndex:r,rightIndex:l}}(r,o,n),E=(0,v.pI)("pagination"),T=null===l||void 0===l?void 0:l.paginationLabel,y=null!==(a=E("ariaLabels.nextPageLabel",null===l||void 0===l?void 0:l.nextPageLabel))&&void 0!==a?a:p.nextPageLabel,z=null!==(i=E("ariaLabels.previousPageLabel",null===l||void 0===l?void 0:l.previousPageLabel))&&void 0!==i?i:p.previousPageLabel,D=null!==(t=E("ariaLabels.pageLabel",null===l||void 0===l?void 0:l.pageLabel,(e=>a=>e({pageNumber:a}))))&&void 0!==t?t:p.pageLabel;function q(e){(0,b.KV)(c,{currentPageIndex:e})}return s.createElement("ul",Object.assign({"aria-label":T},L,{className:(0,m.A)(L.className,h.root,d&&h["root-disabled"]),ref:A}),s.createElement(j,{className:h.arrow,pageIndex:r-1,ariaLabel:null!==z&&void 0!==z?z:p.nextPageLabel,disabled:d||1===r,onClick:function(e){q(e),(0,b.KV)(N,{requestedPageAvailable:!0,requestedPageIndex:e})}},s.createElement(g.A,{name:"angle-left",variant:d?"disabled":"normal"})),s.createElement(f,{pageIndex:1,isCurrent:1===r,disabled:d,ariaLabel:D(1),onClick:q}),k&&s.createElement("li",{className:h.dots},"..."),function(e,a){const i=[];for(let s=e;s<=a;s++)i.push(s);return i}(w,P).map((e=>s.createElement(f,{key:e,isCurrent:r===e,pageIndex:e,disabled:d,ariaLabel:D(e),onClick:q}))),I&&s.createElement("li",{className:h.dots},"..."),!n&&o>1&&s.createElement(f,{isCurrent:r===o,pageIndex:o,disabled:d,ariaLabel:D(o),onClick:q}),s.createElement(j,{className:h.arrow,pageIndex:r+1,ariaLabel:null!==y&&void 0!==y?y:p.nextPageLabel,disabled:d||!n&&(0===o||r===o),onClick:function(e){q(e),(0,b.KV)(C,{requestedPageAvailable:r<o,requestedPageIndex:e})}},s.createElement(g.A,{name:"angle-right",variant:d?"disabled":"normal"})))}function N(e){const a=(0,c.A)("Pagination",{props:{openEnd:e.openEnd}});return s.createElement(C,Object.assign({},e,a))}(0,d.o)(N,"Pagination");var A=i(16236),_=i(90816);function L(e){var{stretch:a=!1}=e,i=(0,u.Tt)(e,["stretch"]);const t=(0,x.G)(i),n=(0,c.A)("FormField",{props:{stretch:a}},t);return s.createElement(_.Ay,Object.assign({stretch:a},i,{__hideLabel:!1,__analyticsMetadata:t},n))}(0,d.o)(L,"FormField");var k=i(95416),w=i(83941),P=i(60184),I=i(73216),E=i(75200),T=i(45394),y=i(83003),z=i(75163),D=i(90287),q=i(15719),S=i(31462),U=i(70579);const F=()=>{var e;const a=(0,y.wA)(),i=(0,y.d4)((e=>e.customers.customers)),[d,c]=(0,s.useState)((null===(e=i.data)||void 0===e?void 0:e.customers)||[]),[u,m]=(0,s.useState)(d),[g,b]=(0,s.useState)(""),[x,h]=(0,s.useState)(null),[v,p]=(0,s.useState)(!1),[j,f]=(0,s.useState)({}),[C,_]=(0,s.useState)(1),[F,O]=(0,s.useState)(null),[R,M]=(0,s.useState)(!1);(0,s.useEffect)((()=>{a((0,z.g)())}),[a]),(0,s.useEffect)((()=>{var e;c((null===(e=i.data)||void 0===e?void 0:e.customers)||[])}),[i]),(0,s.useEffect)((()=>{m(""===g?d:d.filter((e=>Object.values(e).some((e=>"string"===typeof e&&e.toLowerCase().includes(g.toLowerCase()))))))}),[g,d]);const $=u.slice(10*(C-1),10*C),K=(0,I.Zp)(),V=(e,a)=>{if(!a)return e;return e.split(new RegExp("(".concat(a,")"),"gi")).map(((e,i)=>e.toLowerCase()===a.toLowerCase()?(0,U.jsx)("mark",{children:e},i):e))};return(0,U.jsxs)("div",{children:[(0,U.jsx)(t.A,{variant:"borderless",renderAriaLive:e=>{let{firstIndex:a,lastIndex:i,totalItemsCount:s}=e;return"Displaying items ".concat(a," to ").concat(i," of ").concat(s)},columnDefinitions:[{id:"name",header:"Name",cell:e=>(0,U.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,U.jsx)("img",{src:e.imageUrl||D,alt:e.name,style:{width:"30px",height:"30px",borderRadius:"50%"}}),(0,U.jsx)(A.A,{variant:"secondary",href:"/app/customerDetails",children:V(e.name,g)})]}),sortingField:"name",isRowHeader:!0},{id:"organization",header:"Organization",cell:e=>V(e.organization,g),sortingField:"organization"},{id:"status",header:"Status",cell:e=>V(e.status,g),sortingField:"status"},{id:"email",header:"Email",cell:e=>V(e.email,g),sortingField:"email"},{id:"assignTo",header:"Assign to",cell:e=>V(e.assignTo,g)},{id:"address",header:"Address",cell:e=>V(e.address,g)},{id:"mobileNo",header:"Mobile No",cell:e=>V(e.mobileNo,g)},{id:"actions",header:"Actions",cell:e=>(0,U.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,U.jsx)("div",{className:"cursor-pointer",onClick:()=>(h(e),void p(!0)),children:(0,U.jsx)(P.uO9,{})}),(0,U.jsx)("div",{className:"cursor-pointer",onClick:()=>(O(e),void M(!0)),children:(0,U.jsx)(P.qbC,{})}),(0,U.jsx)("div",{className:"cursor-pointer",onClick:()=>{K("/app/customerDetails")},children:(0,U.jsx)(T.whC,{})})]})}],columnDisplay:[{id:"image",visible:!0},{id:"name",visible:!0},{id:"organization",visible:!0},{id:"status",visible:!0},{id:"email",visible:!0},{id:"assignTo",visible:!0},{id:"address",visible:!0},{id:"mobileNo",visible:!0},{id:"actions",visible:!0}],items:$,loadingText:"Loading resources",empty:i.status===q.A.IN_PROGRESS?(0,U.jsx)(n.A,{margin:{vertical:"xs"},textAlign:"center",color:"inherit",children:(0,U.jsx)(r.A,{size:"m",children:(0,U.jsx)("b",{children:"Loading..."})})}):(0,U.jsxs)(n.A,{textAlign:"center",color:"inherit",children:[(0,U.jsx)("b",{children:"No Customer"}),(0,U.jsx)(n.A,{padding:{bottom:"s"},variant:"p",color:"inherit",children:"No resources to display."})]}),filter:(0,U.jsxs)("div",{className:"flex justify-between items-center",children:[(0,U.jsx)(o.A,{filteringPlaceholder:"Find resources",filteringText:g,onChange:e=>{let{detail:a}=e;return b(a.filteringText)}}),(0,U.jsx)(l.A,{variant:"link",iconName:"add-plus",children:"Filter"})]}),header:(0,U.jsxs)("div",{className:"flex justify-between items-center ",children:[(0,U.jsx)("span",{variant:"h2",className:"text-xl font-extrabold",children:"Contacts"}),(0,U.jsx)(r.A,{alignItems:"end",direction:"vertical",children:(0,U.jsx)(l.A,{className:"mb-3",variant:"primary",iconName:"add-plus",onClick:()=>{h({name:"",organization:"",status:"",email:"",assignTo:"",address:"",mobileNo:"",imageUrl:D,isNew:!0}),p(!0)},children:"Add Customer"})})]}),footer:(0,U.jsx)(N,{currentPageIndex:C,onChange:e=>{let{detail:a}=e;_(a.currentPageIndex)},pagesCount:Math.ceil(u.length/10),ariaLabels:{nextPageLabel:"Next page",previousPageLabel:"Previous page",pageLabel:e=>"Page ".concat(e," of all pages")},className:"float-end"})}),(0,U.jsx)(w.A,{onDismiss:()=>p(!1),visible:v,closeAriaLabel:"Close modal",size:"medium",header:x&&x.isNew?"Add New User":"Edit User",footer:(0,U.jsxs)(r.A,{direction:"horizontal",size:"xs",children:[(0,U.jsx)(l.A,{onClick:()=>p(!1),variant:"link",children:"Cancel"}),(0,U.jsx)(l.A,{onClick:()=>{const e=(e=>{const a={};return e.name||(a.name="Name is required"),e.organization||(a.organization="Organization is required"),e.status||(a.status="Status is required"),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(a.email="Invalid email format"),10===e.mobileNo.length&&/^\d+$/.test(e.mobileNo)||(a.mobileNo="Mobile No must be 10 digits"),e.assignTo||(a.assignTo="Assign To is required"),e.address||(a.address="Address is required"),e.imageUrl||(a.imageUrl="Image is required"),a})(x);0===Object.keys(e).length?(x.isNew?m([...u,{...x,isNew:!1}]):m(u.map((e=>e.name===x.name?x:e))),p(!1),h(null)):f(e)},variant:"primary",children:"Save"})]}),children:x&&(0,U.jsxs)("form",{children:[(0,U.jsx)(L,{errorText:j.imageUrl,children:(0,U.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,U.jsx)("img",{src:x.imageUrl||D,alt:"Profile",style:{width:"50px",height:"50px",borderRadius:"50%"}}),(0,U.jsxs)("label",{htmlFor:"upload-image",className:"cursor-pointer",children:[(0,U.jsx)("input",{type:"file",id:"upload-image",className:"hidden",onChange:e=>((e,a)=>{const i=e.target.files[0],s=new FileReader;s.onloadend=()=>{a(s.result)},s.readAsDataURL(i)})(e,(e=>h({...x,imageUrl:e})))}),(0,U.jsxs)("div",{className:"flex justify-center items-center gap-1 border-2 border-[#0972D3] text-[#0972D3] rounded-md p-2  ".concat(x.imageUrl!==D?"cursor-not-allowed opacity-90":""),children:[(0,U.jsx)("span",{children:x.imageUrl===D?"Upload Image":"Change Image"}),(0,U.jsx)("span",{children:(0,U.jsx)(E.B88,{})})]})]}),x.imageUrl!==D&&(0,U.jsx)("div",{className:"border-2 cursor-pointer border-[#0972D3] p-2 rounded-md",onClick:()=>h({...x,imageUrl:D}),disabled:!1,children:(0,U.jsx)(S.WeY,{})})]})}),(0,U.jsx)(L,{label:"Name",errorText:j.name,children:(0,U.jsx)(k.A,{value:x.name,onChange:e=>{const a=e.detail.value;h((e=>({...e,name:a}))),f((e=>({...e,name:a.trim()?"":"Name is required"})))}})}),(0,U.jsx)(L,{label:"Organization",errorText:j.organization,children:(0,U.jsx)(k.A,{value:x.organization,onChange:e=>{const a=e.detail.value;h((e=>({...e,organization:a}))),f((e=>({...e,organization:a.trim()?"":"Organization is required"})))}})}),(0,U.jsx)(L,{label:"Status",errorText:j.status,children:(0,U.jsx)(k.A,{value:x.status,onChange:e=>{const a=e.detail.value;h((e=>({...e,status:a}))),f((e=>({...e,status:a.trim()?"":"Status is required"})))}})}),(0,U.jsx)(L,{label:"Email",errorText:j.email,children:(0,U.jsx)(k.A,{value:x.email,onChange:e=>{const a=e.detail.value;h((e=>({...e,email:a}))),f((e=>({...e,email:a.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)?"":"Invalid email format"})))}})}),(0,U.jsx)(L,{label:"Assign To",errorText:j.assignTo,children:(0,U.jsx)(k.A,{value:x.assignTo,onChange:e=>{const a=e.detail.value;h((e=>({...e,assignTo:a}))),f((e=>({...e,assignTo:a.trim()?"":"Assign To is required"})))}})}),(0,U.jsx)(L,{label:"Address",errorText:j.address,children:(0,U.jsx)(k.A,{value:x.address,onChange:e=>{const a=e.detail.value;h((e=>({...e,address:a}))),f((e=>({...e,address:a.trim()?"":"Address is required"})))}})}),(0,U.jsx)(L,{label:"Mobile No",errorText:j.mobileNo,children:(0,U.jsx)(k.A,{value:x.mobileNo,onChange:e=>{const a=e.detail.value;h((e=>({...e,mobileNo:a}))),f((e=>({...e,mobileNo:10===a.length&&/^\d+$/.test(a)?"":"Mobile No must be 10 digits"})))}})})]})}),(0,U.jsx)(w.A,{onDismiss:()=>M(!1),visible:R,closeAriaLabel:"Close modal",size:"small",header:"Confirm Deletion",footer:(0,U.jsxs)(r.A,{direction:"horizontal",size:"xs",children:[(0,U.jsx)(l.A,{onClick:()=>M(!1),variant:"link",children:"Cancel"}),(0,U.jsx)(l.A,{onClick:()=>{m(u.filter((e=>e.name!==F.name))),M(!1),O(null)},variant:"danger",children:"Delete"})]}),children:F&&(0,U.jsx)(n.A,{children:(0,U.jsxs)("p",{children:["Are you sure you want to delete ",F.name,"?"]})})})]})}}}]);
//# sourceMappingURL=625.ab571cd3.chunk.js.map